/* Trie.js
 * A simple Trie implementation written in JS, with robust built in functions for managing strings
 * Licensed under the MIT licence
 * Created by Gurudayal Khalsa
*/

function Trie(r){var e={};var t="|";this.getObject=function(r){if(!r)return e;var t="";var f=e;for(var i in r){var n=r[i];if(f[n])f=f[n];else return false}if(f!==e){return f}return false};this.get=function(r){if(typeof r==="object"){var n={};for(var u in r)n[r[u]]=this.get(r[u]);return n}if(typeof r!=="string"&&r!==undefined)return[];var a=this.getObject(r);if(typeof r==="string"&&!a)return[];a=a||e;var n=[];function s(r){if(r[t]&&!n[r[t]])n.push(r[t]);if(f(r))for(var e in i(r))s(r[e]);else return}s(a);return n};this.insert=function(r){if(typeof r==="object"){for(var f in r)this.insert(r[f]);return true}if(typeof r!=="string")return false;var i="";var n=e;for(var f in r){var u=r[f];if(!n[u]&&i!==r)n[u]={};i+=u;if(i===r){n[u][t]=r}n=n[u]}return true};this.remove=function(r,i){if(typeof r==="object"){for(var a in r)this.remove(r[a]);return true}if(typeof r!=="string")return false;var i=i||false;var s=this.getObject(r);if(typeof r==="string"&&this.getObject(r)===false||!this.has(r)&&i===false&&s[t]!==r)return false;if(s[t]&&s[t]===r)delete s[t];var o=u(s,r,e);if(!this.has(r)&&i===true&&o[r]){delete o[r];return true}else if(i===false)return false;if(f(s)){if(i===true)for(var a in s)delete s[a];if(n(o)===1&&o[r[r.length-1]])return true}for(var a=r.length-1;a>=0;a--){var v=r[a];var o=u(s,r,e);if(n(o)>=1&&o[v]){delete o[v];if(n(o)>=1)return true}s=o}return true};this.has=function(r){if(typeof r==="object"){var e={};for(var f in r)e[r[f]]=this.has(r[f]);return e}if(typeof r!=="string")return false;var i=this.getObject(r);if(typeof r==="string"&&!i)return false;if(i[t]&&i[t]===r)return true;return false};this.insert(r);function f(r){if(r.length===0)return false;for(var e in r)if(typeof r[e]==="object")return true;return false}function i(r){var e={};for(var f in r){if(r[f]!==t)e[f]=r[f]}return e}function n(r){var e=0;for(var t in r){e++}return e}function u(r,e,t){var f="";var i=t;var n=[];for(var u in e){var a=e[u];if(i[a]){n.push(i);i=i[a]}else return false;if(i===r)return n.pop()}}function a(r){return JSON.parse(JSON.stringify(r))}}