/* Trie.js
 * A simple Trie implementation written in JS, with robust built in functions for managing strings
 * Licensed under the MIT licence
 * Created by Gurudayal Khalsa
*/
function Trie(r){var e={};var t="|";this.getObject=function(r){if(!r)return e;var t="";var f=e;for(var n=0;n<r.length;n++){var i=r[n];if(f[i])f=f[i];else return false}if(f!==e){return f}return false};this.get=function(r){if(typeof r==="object"){var i={};for(var a in r)i[r[a]]=this.get(r[a]);return i}if(typeof r!=="string"&&r!==undefined)return[];var u=this.getObject(r);if(typeof r==="string"&&!u)return[];u=u||e;var i=[];function s(r){if(r[t]&&!i[r[t]])i.push(r[t]);if(f(r))for(var e in n(r))s(r[e]);else return}s(u);return i};this.insert=function(r){if(typeof r==="object"){for(var f in r)this.insert(r[f]);return true}if(typeof r!=="string")return false;var n="";var i=e;for(var f=0;f<r.length;f++){var a=r[f];if(!i[a]&&n!==r)i[a]={};n+=a;if(n===r){i[a][t]=r}i=i[a]}return true};this.remove=function(r,n){if(typeof r==="object"){for(var u in r)this.remove(r[u]);return true}if(typeof r!=="string")return false;var n=n||false;var s=this.getObject(r);if(typeof r==="string"&&this.getObject(r)===false||!this.has(r)&&n===false&&s[t]!==r)return false;if(!this.has(r)&&n===true&&o[r]){delete o[r];return true}else if(!this.has(r)&&n===false)return false;if(s[t]&&s[t]===r)delete s[t];var o=a(s,r,e);if(f(s)){if(n===true)for(var u in s)delete s[u];if(i(o)===1&&o[r[r.length-1]])return true}for(var u=r.length-1;u>=0;u--){var v=r[u];var o=a(s,r,e);if(i(o)>=1&&o[v]){delete o[v];if(i(o)>=1)return true}s=o}return true};this.has=function(r){if(typeof r==="object"){var e={};for(var f in r)e[r[f]]=this.has(r[f]);return e}if(typeof r!=="string")return false;var n=this.getObject(r);if(typeof r==="string"&&!n)return false;if(n[t]&&n[t]===r)return true;return false};this.insert(r);function f(r){if(r.length===0)return false;for(var e in r)if(typeof r[e]==="object")return true;return false}function n(r){var e={};for(var f in r){if(r[f]!==t)e[f]=r[f]}return e}function i(r){var e=0;for(var t in r){e++}return e}function a(r,e,t){var f="";var n=t;var i=[];for(var a=0;a<e.length;a++){var u=e[a];if(n[u]){i.push(n);n=n[u]}else return false;if(n===r)return i.pop()}}function u(r){return JSON.parse(JSON.stringify(r))}}