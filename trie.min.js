/* Trie.js
 * A simple Trie implementation written in JS, with robust built in functions for managing strings
 * Licensed under the MIT licence
 * Created by Gurudayal Khalsa
*/
function Trie(r){var e={};var t="|";this.getObject=function(r){if(!r)return e;var t="";var f=e;for(var n=0;n<r.length;n++){var i=r[n];if(f[i])f=f[i];else return false}if(f!==e){return f}return false};this.get=function(r){if(typeof r==="object"){var i={};for(var u in r)i[r[u]]=this.get(r[u]);return i}if(typeof r!=="string"&&r!==undefined)return[];var a=this.getObject(r);if(typeof r==="string"&&!a)return[];a=a||e;var i=[];function s(r){if(r[t]&&!i[r[t]])i.push(r[t]);if(f(r))for(var e in n(r))s(r[e]);else return}s(a);return i};this.insert=function(r){if(typeof r==="object"){for(var f=0;f<r.length;f++)this.insert(r[f]);return true}if(typeof r!=="string")return false;var n="";var i=e;for(var f=0;f<r.length;f++){var u=r[f];if(!i[u]&&n!==r)i[u]={};n+=u;if(n===r){i[u][t]=r}i=i[u]}return true};this.remove=function(r,n){if(typeof r==="object"){for(var a in r)this.remove(r[a]);return true}if(typeof r!=="string")return false;var n=n||false;var s=this.getObject(r);if(typeof r==="string"&&this.getObject(r)===false||!this.has(r)&&n===false&&s[t]!==r)return false;if(s[t]&&s[t]===r)delete s[t];var o=u(s,r,e);if(!this.has(r)&&n===true&&o[r]){delete o[r];return true}else if(n===false)return false;if(f(s)){if(n===true)for(var a in s)delete s[a];if(i(o)===1&&o[r[r.length-1]])return true}for(var a=r.length-1;a>=0;a--){var v=r[a];var o=u(s,r,e);if(i(o)>=1&&o[v]){delete o[v];if(i(o)>=1)return true}s=o}return true};this.has=function(r){if(typeof r==="object"){var e={};for(var f in r)e[r[f]]=this.has(r[f]);return e}if(typeof r!=="string")return false;var n=this.getObject(r);if(typeof r==="string"&&!n)return false;if(n[t]&&n[t]===r)return true;return false};this.insert(r);function f(r){if(r.length===0)return false;for(var e in r)if(typeof r[e]==="object")return true;return false}function n(r){var e={};for(var f in r){if(r[f]!==t)e[f]=r[f]}return e}function i(r){var e=0;for(var t in r){e++}return e}function u(r,e,t){var f="";var n=t;var i=[];for(var u=0;u<e.length;u++){var a=e[u];if(n[a]){i.push(n);n=n[a]}else return false;if(n===r)return i.pop()}}function a(r){return JSON.parse(JSON.stringify(r))}}